#!/bin/bash

save(){
    local content="$1"
    (echo "$content" | file - | grep -q text) || return
    if ! grep -q -F -x -e "$content" ~/.xclip-history; then
        echo "$content" >> ~/.xclip-history
    fi
}
while true; do
    save "$(xclip -o -selection clipboard)"
    save "$(xclip -o -selection primary)"
    sleep 1
done

