#!/bin/bash

# Move to home directory
cd ~

# General update
sudo apt -y update
sudo apt -y upgrade

# Safe rm
if [ ! `which trash` ]; then
    git clone https://github.com/andreafrancia/trash-cli.git
    cd trash-cli
    sudo python setup.py install
    cd ../
    trash -r trash-cli
fi

# mysql cli plus
if [ ! `which mycli` ]; then
    git clone https://github.com/acro5piano/mycli
    cd mycli
    sudo python setup.py install
    cd ../
    trash -r mycli
fi

# Remove unnecessary items
sudo apt remove --purge -y netsurf*
rm -rf ~/.netsurf

# Language and inputs
sudo apt install -y emacs-mozc

# Development tools
sudo apt install -y vim net-tools bc gcc g++ make git screen tmux ssh emacs tree curl jq
sudo apt install -y software-properties-common python-software-properties man

# Emacs cask
[ `which cask` ] || curl -fsSL https://raw.githubusercontent.com/cask/cask/master/go | python

# vim vundle
[ -e $HOME/.vim/bundle ] || ~/.dotfiles/bin/install_vundle

# Install ruby using rbenv + Ruby-build
if [ ! `which ruby` ]; then
    # For ruby installation
    sudo apt install -y libreadline-dev libssl-dev libsqlite3-dev zlib1g-dev libyaml-dev libssl-dev libsqlite3-dev
    sudo apt install -y sqlite3 libsqlite3-dev
    sudo apt install -y imagemagick # MiniMagick RMagick
    sudo apt install -y libxslt-dev libxml2-dev # Nokogiri
    sudo apt install -y git-core libreadline6 libreadline6-dev libmysqlclient-dev libffi-dev

    git clone https://github.com/sstephenson/rbenv.git ~/.rbenv
    git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
    rbenv install -v 2.3.1
    rbenv rehash
    rbenv global 2.3.1
fi

# For python
if [ ! `which jupyter` ]; then
    sudo apt install -y python-dev python-pip python3 python3-pip gfortran liblapack-dev libpng12-dev libfreetype6-dev
    sudo pip install virtualenv
    sudo pip install ipython
    sudo pip install jupyter
fi

# For android
sudo apt install -y lib32z1 lib32ncurses5 lib32bz2-1.0 lib32stdc++6

# For Elasticsearch
sudo apt install -y openjdk-8-jdk

if [ ! `which go` ]; then
    # Install golang 1.6
    sudo wget https://storage.googleapis.com/golang/go1.6.linux-amd64.tar.gz
    tar xzvf go1.6.linux-amd64.tar.gz && rm -rf go1.6.linux-amd64.tar.gz
    sudo mv go /usr/local && rm -rf go
fi

if [ ! `which node` ]; then
    # Install nodejs
    sudo apt install -y build-essential
    wget https://nodejs.org/dist/v4.4.5/node-v4.4.5.tar.gz
    tar xvf node-v4.4.5.tar.gz && rm node-v4.4.5.tar.gz
    sudo cp node-v4.4.5/bin/* /usr/local/bin && rm -rf node-v4.4.5
fi

# Change shell for zsh
if [ $SHELL != /bin/zsh ]; then
    sudo apt install -y zsh
    chsh -s /bin/zsh
fi

